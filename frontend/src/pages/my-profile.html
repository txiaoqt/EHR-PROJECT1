<section class="page">
  <div class="card" style="max-width:760px; margin:12px auto;">
    <div style="display:flex;gap:16px;align-items:center">
      <img id="myAvatar" src="../src/assets/images/avatar-placeholder.jpg" alt="Avatar" style="width:72px;height:72px;border-radius:12px;object-fit:cover">
      <div>
        <h2 id="myName" style="margin:0">Dr. Rivera</h2>
        <div style="color:var(--muted)">Physician</div>
        <div style="margin-top:8px;color:var(--muted)">Email: <span id="myEmail">dr.rivera@example.com</span></div>
      </div>
      <div style="margin-left:auto; display:flex; gap:8px;">
        <button class="btn" id="editProfileBtn">Edit</button>
        <button class="btn secondary" id="logoutBtn">Sign out</button>
      </div>
    </div>

    <div style="margin-top:16px; display:grid; grid-template-columns:1fr 320px; gap:16px">
      <div>
        <div class="card" style="margin-bottom:12px">
          <h3 style="margin-top:0">About</h3>
          <p style="color:var(--muted)">This is the signed-in user's profile. Replace with real profile fields from your backend (clinic, phone, specialty).</p>
        </div>

        <div class="card">
          <h3 style="margin-top:0">Preferences</h3>
          <div style="display:flex;gap:8px;align-items:center">
            <label class="label-muted">Theme</label>
            <button class="btn small" id="prefLight">Light</button>
            <button class="btn small" id="prefDark">Dark</button>
          </div>
        </div>
      </div>

      <aside>
          </div>
        </div>
      </aside>
    </div>
  </div>
</section>

<script>
  // populate from ehr_user
  const u = JSON.parse(localStorage.getItem('ehr_user') || 'null');
  if(u){
    document.getElementById('myName').textContent = u.name || 'User';
    document.getElementById('myAvatar').src = u.avatar || '../src/assets/images/avatar-placeholder.jpg';
    document.getElementById('myEmail').textContent = u.email || '(no email)';
  }

  document.getElementById('logoutBtn')?.addEventListener('click', ()=>{
    localStorage.removeItem('ehr_user');
    window.dispatchEvent(new CustomEvent('app:navigate', { detail: { page: 'login' } }));
  });

  document.getElementById('prefLight')?.addEventListener('click', ()=> { window.applyTheme && window.applyTheme('light'); });
  document.getElementById('prefDark')?.addEventListener('click', ()=> { window.applyTheme && window.applyTheme('dark'); });
</script>
